{"version":3,"file":"index.js","sources":["src/index.js"],"sourcesContent":["import karas from 'karas';\nimport { version } from '../package.json';\n\nconst {\n  enums: {\n    STYLE_KEY: {\n      DISPLAY,\n      VISIBILITY,\n      TRANSLATE_X,\n      TRANSLATE_Y,\n      OPACITY,\n      SCALE_X,\n      SCALE_Y,\n      ROTATE_Z,\n    },\n  },\n  refresh: {\n    level: {\n      CACHE,\n    },\n    webgl: {\n      drawTextureCache,\n    },\n  },\n  util: {\n    isNil,\n  },\n  math: {\n    geom: {\n      d2r,\n    },\n    matrix: {\n      identity,\n      isE,\n      multiply,\n      multiplyTfo,\n      tfoMultiply,\n      multiplyTranslateX,\n      multiplyTranslateY,\n      multiplyRotateZ,\n      multiplyScaleX,\n      multiplyScaleY,\n    },\n  },\n  mode: {\n    CANVAS,\n    WEBGL,\n  },\n  style: {\n    css,\n  },\n  animate,\n  Img,\n  inject,\n} = karas;\n\nclass $ extends karas.Geom {\n  render(renderMode, ctx, dx, dy) {\n    let res = super.render(renderMode, ctx, dx, dy);\n    let dataList = this.dataList;\n    if(!dataList || !dataList.length) {\n      return res;\n    }\n    let root = this.__root;\n    if(renderMode !== root.__renderMode) {\n      return res;\n    }\n    let ani = this.ani, delay = this.delay, animation = this.animation, currentTime = this.currentTime,\n      duration = this.duration, iterations = this.iterations;\n    if(ani && currentTime >= delay) {\n      let t = currentTime - delay;\n      let playCount = Math.min(iterations - 1, Math.floor(currentTime / duration));\n      if(playCount >= iterations) {\n        return res;\n      }\n      t -= duration * playCount;\n      let i = animate.Animation.binarySearch(0, animation.length - 1, t, animation);\n      let notSameFrame = this.lastFrameIndex !== i;\n      this.lastFrameIndex = i;\n      let frame = animation[i];\n      let total;\n      if(i >= animation.length - 1) {\n        total = animation[i].time;\n      }\n      else {\n        total = animation[i + 1].time - frame.time;\n      }\n      let percent = (t - frame.time) / total;\n      animate.Animation.calIntermediateStyle(frame, percent, ani, notSameFrame);\n    }\n    else {\n      ani = null;\n    }\n    let { __x1: x1, __y1: y1, __computedStyle } = this;\n    let op = __computedStyle[OPACITY];\n    if(__computedStyle[DISPLAY] === 'none'\n      || __computedStyle[VISIBILITY] === 'hidden'\n      || op <= 0) {\n      return res;\n    }\n    let globalAlpha;\n    if(renderMode === CANVAS) {\n      globalAlpha = ctx.globalAlpha;\n    }\n    let env = this.env;\n    let cacheList = [], lastPage, cx = env.width * 0.5, cy = env.height * 0.5;\n    let me = this.domParent.matrixEvent;\n    dataList.forEach(item => {\n      if(item.loaded) {\n        let opacity = op * item.opacity;\n        // 计算位置\n        let x = item.nowX + x1 + dx - item.x;\n        let y = item.nowY + y1 + dy - item.y;\n        let m = identity();\n        let img = inject.IMG[item.url];\n        let tfo = [item.x + img.width * 0.5, item.y + img.height * 0.5];\n        m = tfoMultiply(tfo[0], tfo[1], m);\n        // 移动一半使得图形中心为计算位置的原点，还有平移位置\n        m = multiplyTranslateX(m, x - img.width * 0.5);\n        m = multiplyTranslateY(m, y - img.height * 0.5);\n        // 如果有path，需要设置且保存当时的位置\n        if(ani) {\n          let cs;\n          if(item.hasOwnProperty('ani')) {\n            cs = item.ani;\n          }\n          else {\n            cs = item.ani = css.cloneStyle(ani.__currentStyle);\n          }\n          if(cs.hasOwnProperty(TRANSLATE_X)) {\n            let tx = cs[TRANSLATE_X].v;\n            m = multiplyTranslateX(m, tx);\n          }\n          if(cs.hasOwnProperty(TRANSLATE_Y)) {\n            let ty = cs[TRANSLATE_Y].v;\n            m = multiplyTranslateY(m, ty);\n          }\n          if(cs.hasOwnProperty(OPACITY)) {\n            opacity *= cs[OPACITY];\n          }\n          if(cs.hasOwnProperty(SCALE_X)) {\n            m = multiplyScaleX(m, cs[SCALE_X].v);\n          }\n          if(cs.hasOwnProperty(SCALE_Y)) {\n            m = multiplyScaleY(m, cs[SCALE_Y].v);\n          }\n          if(cs.hasOwnProperty(ROTATE_Z)) {\n            m = multiplyRotateZ(m, d2r(cs[ROTATE_Z].v));\n          }\n        }\n        // 保持方向角度于起点一致性，可以指定angle偏移\n        if(!isNil(item.angle)) {\n          let r = d2r(item.deg + item.angle);\n          m = multiplyRotateZ(m, r);\n        }\n        if(item.sc && item.sc !== 1) {\n          m = multiplyScaleX(m, item.sc);\n          m = multiplyScaleY(m, item.sc);\n        }\n        if(img.width !== item.width) {\n          m = multiplyScaleX(m, item.width / img.width);\n        }\n        if(img.height !== item.height) {\n          m = multiplyScaleY(m, item.height / img.height);\n        }\n        if(renderMode === CANVAS) {\n          m = multiplyTfo(m, -tfo[0], -tfo[1]);\n          if(!isE(me)) {\n            m = multiply(me, m);\n          }\n          ctx.globalAlpha = opacity;\n          // canvas处理方式不一样，render的dx和dy包含了total的偏移计算考虑，可以无感知\n          ctx.setTransform(m[0], m[1], m[4], m[5], m[12], m[13]);\n          ctx.drawImage(item.source, item.x, item.y);\n        }\n        else if(renderMode === WEBGL) {\n          let cache = item.cache;\n          if(!cache) {\n            item.cache = true;\n            Img.toWebglCache(ctx, root, item.url, item.x, item.y, function(res) {\n              cache = item.cache = res;\n              if(cache.count === 1) {\n                let { ctx, width, height, x, y } = cache;\n                ctx.drawImage(item.source, x, y, width, height);\n                cache.update();\n              }\n            });\n          }\n          if(cache && cache !== true) {\n            m = multiplyTfo(m, -tfo[0], -tfo[1]);\n            if(!isE(me)) {\n              m = multiply(me, m);\n            }\n            if(!cache.__available && cache.__enabled) {\n              cache.__available = true;\n            }\n            if(cache.__available) {\n              if(lastPage && lastPage !== cache.__page) {\n                drawTextureCache(ctx, cacheList.splice(0), cx, cy, dx, dy);\n              }\n              lastPage = cache.__page;\n              cacheList.push({ cache, opacity, matrix: m });\n            }\n          }\n        }\n      }\n    });\n    if(renderMode === CANVAS) {\n      ctx.globalAlpha = globalAlpha;\n    }\n    else if(renderMode === WEBGL) {\n      drawTextureCache(ctx, cacheList, cx, cy, dx, dy);\n    }\n  }\n}\n\nlet uuid = 0;\n\nclass ParticleLaunch extends karas.Component {\n  constructor(props) {\n    super(props);\n    this.count = 0;\n    this.time = 0;\n    this.playbackRate = props.playbackRate || 1;\n    this.interval = props.interval || 300;\n    this.intervalNum = props.intervalNum || 1;\n    this.num = props.num || 0;\n    this.__duration = props.duration || 1000;\n    this.__easing = props.easing;\n  }\n\n  componentWillUnmount() {\n    (this.dataList || []).forEach(item => {\n      item.cache && item.cache.release && item.cache.release();\n    });\n  }\n\n  componentDidMount() {\n    let { props, root: { renderMode } } = this;\n    let { list = [], initNum = 0, delay = 0, duration = 1000, iterations = Infinity, easing, autoPlay, animation } = props;\n    let dataList = this.dataList = [];\n    let i = 0, length = list.length;\n    let lastTime = 0, count = 0;\n    let fake = this.ref.fake;\n    let currentTime = 0, maxTime = 0;\n    let hasStart;\n    // 分析path，类似waa\n    if(Array.isArray(animation) && animation.length > 1) {\n      // 偷懒省略animation某个帧时，cloneStyle不报错\n      let ani = {\n        __currentStyle: css.normalize({\n          translateX: 0,\n          translateY: 0,\n          scale: 1,\n          rotateZ: 0,\n          opacity: 1,\n        }),\n      };\n      let pathAni = animate.Animation.parse(animation, duration, easing, ani);\n      let keys = animate.Animation.unify(pathAni, ani);\n      animate.Animation.calTransition(pathAni, keys, ani);\n      fake.ani = ani;\n      fake.animation = pathAni;\n      fake.currentTime = 0;\n      fake.delay = delay;\n      fake.iterations = iterations;\n      fake.duration = duration;\n    }\n    let cb = this.cb = diff => {\n      fake.dataList = null;\n      diff *= this.playbackRate;\n      currentTime += diff;\n      fake.currentTime = currentTime;\n      if(delay > 0) {\n        delay -= diff;\n      }\n      if(delay <= 0) {\n        diff += delay;\n        this.time += diff;\n        delay = 0;\n        // 如果有初始粒子\n        if(initNum > 0) {\n          lastTime = this.time;\n          while(initNum-- > 0) {\n            i++;\n            i %= length;\n            count++;\n            let o = this.genItem(list[i], duration);\n            maxTime = Math.max(maxTime, currentTime + o.duration);\n            dataList.push(o);\n          }\n        }\n        // 已有的每个粒子时间增加计算位置，结束的则消失\n        for(let j = dataList.length - 1; j >= 0; j--) {\n          let item = dataList[j];\n          item.time += diff;\n          if(item.time >= item.duration) {\n            let remove = dataList.splice(j, 1);\n            // webgl需释放纹理\n            if(renderMode === WEBGL && remove.length) {\n              remove.forEach(item => {\n                item.cache && item.cache.release && item.cache.release();\n              });\n            }\n          }\n          else if(item.source) {\n            let { x, y, tx, ty, dx, dy, time, duration, easing, blink, fade, scale, direction } = item;\n            let percent = time / duration;\n            if(easing) {\n              percent = easing(percent);\n            }\n            if(direction === 'reverse') {\n              item.nowX = tx - dx * percent;\n              item.nowY = ty - dy * percent;\n            }\n            else {\n              item.nowX = x + dx * percent;\n              item.nowY = y + dy * percent;\n            }\n            let opacity = 1;\n            if(blink) {\n              let num = Math.floor(time / blink.duration);\n              let diff = time % blink.duration;\n              let easing = blink.easing;\n              let percent = diff / blink.duration;\n              if(easing) {\n                let timeFunction = animate.easing.getEasing(easing);\n                if(timeFunction !== animate.easing.linear) {\n                  percent = timeFunction(percent);\n                }\n              }\n              // 偶数from2to，奇数to2from\n              if(num % 2 === 0) {\n                opacity *= blink.from + percent * (blink.to - blink.from);\n              }\n              else {\n                opacity *= blink.to - percent * (blink.to - blink.from);\n              }\n            }\n            if(fade) {\n              let p = time / fade.duration;\n              p = Math.max(0, p);\n              p = Math.min(1, p);\n              let easing = fade.easing;\n              if(easing) {\n                let timeFunction = animate.easing.getEasing(easing);\n                if(timeFunction !== animate.easing.linear) {\n                  p = timeFunction(p);\n                }\n              }\n              let alpha = fade.from + (fade.to - fade.from) * p;\n              alpha = Math.max(0, alpha);\n              alpha = Math.min(1, alpha);\n              opacity *= alpha;\n            }\n            item.opacity = opacity;\n            let sc = 1;\n            if(scale) {\n              let p = time / scale.duration;\n              p = Math.max(0, p);\n              p = Math.min(1, p);\n              let easing = scale.easing;\n              if(easing) {\n                let timeFunction = animate.easing.getEasing(easing);\n                if(timeFunction !== animate.easing.linear) {\n                  p = timeFunction(p);\n                }\n              }\n              let s = scale.from + (scale.to - scale.from) * p;\n              sc *= s;\n            }\n            item.sc = sc;\n            item.loaded = true;\n            hasStart = true;\n          }\n        }\n        // 开始后每次都刷新，即便数据已空，要变成空白初始状态\n        if(hasStart && currentTime >= delay) {\n          fake.dataList = dataList;\n          fake.refresh(CACHE);\n          this.props.onFrame?.();\n          this.emit('frame');\n        }\n        // 数量完了动画也执行完了停止\n        if(count >= this.num && currentTime >= maxTime) {\n          fake.removeFrameAnimate(cb);\n          this.props.onFinish?.();\n          this.emit('finish');\n          return;\n        }\n        // 每隔interval开始生成这一阶段的粒子数据\n        if(this.time >= lastTime + this.interval && count < this.num) {\n          lastTime = this.time;\n          for(let j = 0; j < this.intervalNum; j++) {\n            i++;\n            i %= length;\n            count++;\n            let o = this.genItem(list[i], duration);\n            maxTime = Math.max(maxTime, currentTime + o.duration);\n            dataList.push(o);\n            if(count >= this.num) {\n              break;\n            }\n          }\n        }\n      }\n    };\n    if(autoPlay !== false) {\n      fake.frameAnimate(cb);\n    }\n  }\n\n  genItem(item, dur) {\n    let { width, height } = this;\n    let o = {\n      id: uuid++,\n      time: 0,\n      url: item.url,\n      dur,\n    };\n    if(Array.isArray(item.x)) {\n      o.x = (item.x[0] + Math.random() * (item.x[1] - item.x[0])) * width;\n    }\n    else {\n      o.x = item.x * width;\n    }\n    if(Array.isArray(item.y)) {\n      o.y = (item.y[0] + Math.random() * (item.y[1] - item.y[0])) * height;\n    }\n    else {\n      o.y = item.y * height;\n    }\n    if(Array.isArray(item.duration)) {\n      o.duration = (item.duration[0] + Math.random() * (item.duration[1] - item.duration[0]));\n    }\n    else {\n      o.duration = item.duration || dur;\n    }\n    if(Array.isArray(item.width)) {\n      o.width = item.width[0] + Math.random() * (item.width[1] - item.width[0]);\n    }\n    else if(!isNil(item.width)) {\n      o.width = item.width;\n    }\n    if(Array.isArray(item.height)) {\n      o.height = item.height[0] + Math.random() * (item.height[1] - item.height[0]);\n    }\n    else if(!isNil(item.height)) {\n      o.height = item.height;\n    }\n    let opacity = 1;\n    if(Array.isArray(item.opacity)) {\n      opacity = item.opacity[0] + Math.random() * (item.opacity[1] - item.opacity[0]);\n    }\n    else if(item.opacity !== null && item.opacity !== undefined) {\n      opacity = parseFloat(item.opacity);\n    }\n    o.opacity = opacity;\n    let deg = 0;\n    if(Array.isArray(item.deg)) {\n      deg = item.deg[0] + Math.random() * (item.deg[1] - item.deg[0]);\n    }\n    else if(item.deg) {\n      deg = item.deg;\n    }\n    o.deg = deg;\n    let angle = parseFloat(item.angle);\n    if(item.angle === true) {\n      angle = 0;\n    }\n    if(!isNaN(angle)) {\n      o.angle = angle;\n    }\n    let distance = 0;\n    if(Array.isArray(item.distance)) {\n      distance = (item.distance[0] + Math.random() * (item.distance[1] - item.distance[0])) * width;\n    }\n    else if(item.distance) {\n      distance = item.distance * width;\n    }\n    o.distance = distance;\n    o.direction = item.direction;\n    let deg2 = deg;\n    if(deg >= 270) {\n      deg = 360 - deg;\n      deg = d2r(deg);\n      o.tx = o.x + distance * Math.cos(deg);\n      o.ty = o.y - distance * Math.sin(deg);\n    }\n    else if(deg >= 180) {\n      deg = deg - 180;\n      deg = d2r(deg);\n      o.tx = o.x - distance * Math.cos(deg);\n      o.ty = o.y - distance * Math.sin(deg);\n    }\n    else if(deg >= 90) {\n      deg = 180 - deg;\n      deg = d2r(deg);\n      o.tx = o.x - distance * Math.cos(deg);\n      o.ty = o.y + distance * Math.sin(deg);\n    }\n    else {\n      deg = d2r(deg);\n      o.tx = o.x + distance * Math.cos(deg);\n      o.ty = o.y + distance * Math.sin(deg);\n    }\n    o.deg = deg2;\n    o.dx = o.tx - o.x;\n    o.dy = o.ty - o.y;\n    ['blink', 'fade', 'scale'].forEach(k => {\n      if(item[k]) {\n        let { from, to, duration, easing } = item[k];\n        if(Array.isArray(duration)) {\n          duration = duration[0] + Math.random() * (duration[1] - duration[0]);\n        }\n        if(Array.isArray(from)) {\n          from = from[0] + Math.random() * (from[1] - from[0]);\n        }\n        if(Array.isArray(to)) {\n          to = to[0] + Math.random() * (to[1] - to[0]);\n        }\n        o[k] = {\n          from,\n          to,\n          duration,\n          easing,\n        };\n      }\n    });\n    if(item.easing) {\n      o.easing = animate.easing.getEasing(item.easing);\n    }\n    if(item.url) {\n      inject.measureImg(item.url, function(res) {\n        if(res.success) {\n          o.source = res.source;\n          o.sourceWidth = res.width;\n          o.sourceHeight = res.height;\n          if(!(isNil(o.width) && isNil(o.height))) {\n            if(isNil(o.width)) {\n              o.width = res.width / res.height * o.height;\n            }\n            else if(isNil(o.height)) {\n              o.height = o.width * res.height / res.width;\n            }\n          }\n          else {\n            o.width = res.width;\n            o.height = res.height;\n          }\n        }\n      });\n    }\n    return o;\n  }\n\n  pause() {\n    this.ref.fake.removeFrameAnimate(this.cb);\n  }\n\n  resume() {\n    this.ref.fake.frameAnimate(this.cb);\n  }\n\n  play() {\n    this.count = 0;\n    this.time = 0;\n    this.ref.fake.removeFrameAnimate(this.cb);\n    this.ref.fake.frameAnimate(this.cb);\n  }\n\n  get playbackRate() {\n    return this.__playbackRate;\n  }\n\n  set playbackRate(v) {\n    this.__playbackRate = parseFloat(v) || 1;\n  }\n\n  get interval() {\n    return this.__interval;\n  }\n\n  get intervalNum() {\n    return this.__intervalNum;\n  }\n\n  set intervalNum(v) {\n    this.__intervalNum = parseInt(v) || 1;\n  }\n\n  set interval(v) {\n    this.__interval = parseInt(v) || 300;\n  }\n\n  get num() {\n    return this.__num;\n  }\n\n  set num(v) {\n    if(v === Infinity || /infinity/i.test(v)) {\n      this.__num = Infinity;\n    }\n    else {\n      this.__num = parseInt(v) || 0;\n    }\n  }\n\n  get duration() {\n    return this.__duration;\n  }\n\n  get easing() {\n    return this.__easing;\n  }\n\n  render() {\n    return <div>\n      <$ ref=\"fake\" style={{\n        width: '100%',\n        height: '100%',\n        fill: 'none',\n        stroke: 0,\n      }}/>\n    </div>;\n  }\n}\n\nParticleLaunch.version = version;\n\nexport default ParticleLaunch;\n"],"names":["karas","enums","STYLE_KEY","DISPLAY","VISIBILITY","TRANSLATE_X","TRANSLATE_Y","OPACITY","SCALE_X","SCALE_Y","ROTATE_Z","refresh","CACHE","level","drawTextureCache","webgl","isNil","util","math","d2r","geom","matrix","identity","isE","multiply","multiplyTfo","tfoMultiply","multiplyTranslateX","multiplyTranslateY","multiplyRotateZ","multiplyScaleX","multiplyScaleY","mode","CANVAS","WEBGL","css","style","animate","Img","inject","$","renderMode","ctx","dx","dy","res","dataList","length","root","__root","__renderMode","ani","delay","animation","currentTime","duration","iterations","t","playCount","Math","min","floor","i","Animation","binarySearch","notSameFrame","lastFrameIndex","frame","total","time","percent","calIntermediateStyle","x1","__x1","y1","__y1","__computedStyle","op","globalAlpha","env","cacheList","lastPage","cx","width","cy","height","me","domParent","matrixEvent","forEach","item","loaded","opacity","x","nowX","y","nowY","m","img","IMG","url","tfo","cs","hasOwnProperty","cloneStyle","__currentStyle","tx","v","ty","angle","r","deg","sc","setTransform","drawImage","source","cache","toWebglCache","count","update","__available","__enabled","__page","splice","push","Geom","uuid","ParticleLaunch","props","playbackRate","interval","intervalNum","num","__duration","__easing","easing","release","list","initNum","Infinity","autoPlay","lastTime","fake","ref","maxTime","hasStart","Array","isArray","normalize","translateX","translateY","scale","rotateZ","pathAni","parse","keys","unify","calTransition","cb","diff","o","genItem","max","j","remove","blink","fade","direction","timeFunction","getEasing","linear","from","to","p","alpha","s","onFrame","emit","removeFrameAnimate","onFinish","frameAnimate","dur","id","random","undefined","parseFloat","isNaN","distance","deg2","cos","sin","k","measureImg","success","sourceWidth","sourceHeight","__playbackRate","__interval","parseInt","__intervalNum","__num","test","fill","stroke","Component","version"],"mappings":"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"}